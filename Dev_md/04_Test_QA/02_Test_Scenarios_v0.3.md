# 16. 통합 테스트 시나리오 v0.3 (Integration Test Scenarios)

## 1. 개요 (Overview)
본 문서는 PyTarot v0.3 웹 애플리케이션의 정상 동작 여부를 사용자가 직접 검증하기 위한 테스트 절차와 기대 결과(Expected Results)를 정의합니다.

*   **테스트 대상 URL:** `http://localhost:8000/static/index.html`
*   **테스트 환경:** PC 또는 모바일 웹 브라우저 (Chrome 권장)

---

## 2. 기능 테스트 (Functional Tests)

### TC-01: 기본 운세 보기 (Happy Path)
가장 일반적인 사용 흐름을 점검합니다.

1.  **단계 (Steps):**
    1.  메인 화면에서 질문 입력창에 "오늘 나의 직업운은 어때?"라고 입력한다.
    2.  '배열법 선택'에서 **'쓰리 카드 (Three Card)'**를 선택한다.
    3.  **[운명의 카드 펼치기]** 버튼을 클릭한다.
2.  **기대 결과 (Expected Results):**
    *   **셔플 화면:** 화면이 전환되며 보라색 배경 위에서 카드 3장이 좌우로 섞이는 애니메이션이 약 3초간 재생된다.
    *   **드로우 화면:** 자동으로 드로우 화면으로 넘어가며, 화면 중앙에 카드 덱(뒷면)과 하단에 3개의 빈 점선 슬롯이 표시된다.
    *   **드로우 액션:** 덱을 클릭할 때마다 카드가 포물선을 그리며 빈 슬롯으로 날아가 꽂힌다. (총 3회 반복)
    *   **결과 화면:** 3장이 모두 채워지면 결과 화면으로 전환된다. 카드가 뒤집히며(Flip) 이미지가 공개되고, 하단 텍스트 상자에 AI의 해석이 한 글자씩 타자 치듯 출력된다.

### TC-02: 입력값 검증 (Input Validation)
필수 입력값이 누락되었을 때의 방어 로직을 점검합니다.

1.  **단계 (Steps):**
    1.  새로고침(F5) 후, 질문 입력창을 **비워둔 상태**로 둔다.
    2.  **[운명의 카드 펼치기]** 버튼을 클릭한다.
2.  **기대 결과 (Expected Results):**
    *   브라우저 상단에 "질문을 입력해주세요."라는 경고창(Alert)이 뜬다.
    *   다음 단계로 넘어가지 않고 메인 화면이 유지된다.

### TC-03: 원 카드 스프레드 동작 확인
설정에 따른 UI 변경 사항을 점검합니다.

1.  **단계 (Steps):**
    1.  질문을 입력하고 '배열법 선택'에서 **'원 카드 (One Card)'**를 선택한다.
    2.  시작 버튼을 누르고 셔플 단계를 지나 드로우 단계로 진입한다.
2.  **기대 결과 (Expected Results):**
    *   **슬롯 개수:** 드로우 화면 하단에 빈 슬롯이 **1개**만 생성되어야 한다.
    *   **카운트:** 덱을 1번만 클릭하면 즉시 결과 화면으로 넘어간다.

---

## 3. UI/UX 및 시각적 테스트 (Visual & Interaction Tests)

### TC-04: 반응형 레이아웃 (Responsive Layout)
화면 크기에 따라 디자인이 깨지지 않는지 점검합니다.

1.  **단계 (Steps):**
    1.  브라우저 창의 너비를 스마트폰 수준(약 400px)으로 좁힌다. (또는 F12 개발자 도구의 모바일 모드 활용)
    2.  TC-01(쓰리 카드) 과정을 진행하며 드로우 및 결과 화면을 관찰한다.
2.  **기대 결과 (Expected Results):**
    *   **슬롯 배치:** 드로우 화면의 슬롯 3개가 가로로 찌그러지지 않고, 공간이 부족하면 자동으로 **줄 바꿈**되어 배치된다.
    *   **카드 크기:** PC 화면보다 카드의 크기가 적절히 작아져 화면 밖으로 잘리지 않아야 한다.

### TC-05: 카드 뒤집기 효과 (3D Flip)
결과 화면에서 카드가 공개될 때의 시각 효과를 점검합니다.

1.  **단계 (Steps):**
    1.  결과 화면에 진입하는 순간을 관찰한다.
2.  **기대 결과 (Expected Results):**
    *   카드가 단순히 이미지로 바뀌는 것이 아니라, 마치 동전이 뒤집히듯 **3차원 회전 애니메이션**과 함께 앞면이 나타나야 한다.
    *   역방향(Reversed) 카드가 나왔다면, 그림이 180도 뒤집힌 상태로 표시되어야 한다.

---

## 4. 데이터 연동 테스트 (Data Integration Tests)

### TC-06: AI 스트리밍 해석 (SSE)
백엔드와의 실시간 통신 상태를 점검합니다.

1.  **단계 (Steps):**
    1.  결과 화면에서 하단 텍스트 박스를 주시한다.
2.  **기대 결과 (Expected Results):**
    *   텍스트가 한 번에 "팍" 뜨는 것이 아니라, **실시간으로 생성**되는 것처럼 글자가 흐르듯 나타나야 한다.
    *   내용이 질문("직업운")과 관련이 있어야 하며, 뽑힌 카드(예: The Fool)의 의미를 포함하고 있어야 한다.

### TC-07: 에러 핸들링 (Error Handling)
서버 장애 시 사용자 안내를 점검합니다. (선택 사항: 서버 강제 종료 필요)

1.  **단계 (Steps):**
    1.  서버(`uvicorn`)를 강제로 종료(Ctrl+C)한다.
    2.  웹 페이지에서 [운명의 카드 펼치기]를 시도한다.
2.  **기대 결과 (Expected Results):**
    *   "오류가 발생했습니다: Failed to fetch" 또는 유사한 네트워크 에러 메시지 창이 뜨며, 앱이 멈추지 않고 사용자에게 상황을 인지시켜야 한다.

---

## 5. v0.4 신규 기능 테스트 (New Features Test)

### TC-08: 부채꼴 인터페이스 (Fan-out Interface)
드로우 화면에서 카드가 부채꼴로 펼쳐지는지 확인합니다.

1.  **단계 (Steps):**
    1.  질문을 입력하고 시작하여 드로우 화면(Step 3)에 진입한다.
    2.  화면 하단의 카드 배치를 확인한다.
    3.  마우스로 여러 카드 위를 훑어본다(Hover).
2.  **기대 결과 (Expected Results):**
    *   **배치:** 카드가 한 뭉치로 쌓여있지 않고, 무지개처럼 둥글게(Arc) 펼쳐져 있어야 한다.
    *   **호버:** 마우스를 올린 카드가 톡 튀어 오르며(Pop-up) 다른 카드보다 앞으로 나와야 한다.
    *   **클릭:** 카드를 클릭하면 그 위치에서 출발하여 슬롯으로 날아가는 애니메이션이 자연스러워야 한다.

### TC-09: 모바일 덱 전환 (Mobile Deck Mode)
좁은 화면에서의 UI 자동 전환을 점검합니다.

1.  **단계 (Steps):**
    1.  브라우저 창의 너비를 좁힌다(768px 이하).
    2.  드로우 화면의 카드 덱 형태를 관찰한다.
2.  **기대 결과 (Expected Results):**
    *   부채꼴 모양이 해제되고, **가로로 길게 나열된 스크롤 가능한 덱** 형태로 변해야 한다.
    *   카드를 좌우로 스크롤하며 선택할 수 있어야 한다.
